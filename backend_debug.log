INFO:     Started server process [25175]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     127.0.0.1:59533 - "WebSocket /socket.io/?EIO=4&transport=websocket" [accepted]
INFO:     connection open
LOADING BACKEND/API/FEATURES.PY - IF YOU SEE THIS, THE CODE IS UPDATED


==================================================
STARTING THE NEW HIRES API... v3 (Audio Fixes Applied)
Features module loaded from: /Users/milenakowalska/Desktop/AI/Hackathon2025_12_Linz/The-New-Hires-Login/backend/api/features.py
==================================================


2026-01-31 14:26:13,604 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2026-01-31 14:26:13,604 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2026-01-31 14:26:13,605 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2026-01-31 14:26:13,605 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2026-01-31 14:26:13,606 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2026-01-31 14:26:13,606 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2026-01-31 14:26:13,607 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2026-01-31 14:26:13,613 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.avatar_url, users.xp, users.level, users.sprint_start_date, users.onboarding_completed_tasks, users.repo_full_name, users.last_indexed_commit, users.truthfulness, users.effort, users.reliability, users.collaboration, users.quality 
FROM users 
WHERE users.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:SELECT users.id, users.username, users.hashed_password, users.avatar_url, users.xp, users.level, users.sprint_start_date, users.onboarding_completed_tasks, users.repo_full_name, users.last_indexed_commit, users.truthfulness, users.effort, users.reliability, users.collaboration, users.quality 
FROM users 
WHERE users.id = $1::INTEGER
2026-01-31 14:26:13,613 INFO sqlalchemy.engine.Engine [generated in 0.00008s] (8,)
INFO:sqlalchemy.engine.Engine:[generated in 0.00008s] (8,)
INFO:google_genai.models:AFC is enabled with max remote calls: 10.
INFO:httpx:HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://api.github.com/user/repos "HTTP/1.1 422 Unprocessable Entity"
DEBUG: Found GitHub token (starts with ghp_...)
Generating project for: A task management system (Backend: Python FastAPI, Frontend: React)
Project generation error: Invalid \escape: line 12 column 70 (char 7102)
DEBUG: Project generation result keys: dict_keys(['project_name', 'repo_name', 'is_fallback', 'files', 'tickets'])
DEBUG: Files generated: ['index.html', 'styles.css', 'app.js', 'README.md']
DEBUG: GitHub API Error 422: {"message":"Repository creation failed.","errors":[{"resource":"Repository","code":"custom","field":"name","message":"name already exists on this account"}],"documentation_url":"https://docs.github.com/rest/repos/repos#create-a-repository-for-the-authenticated-user","status":"422"}
2026-01-31 14:26:30,408 INFO sqlalchemy.engine.Engine UPDATE users SET repo_full_name=$1::VARCHAR WHERE users.id = $2::INTEGER
INFO:sqlalchemy.engine.Engine:UPDATE users SET repo_full_name=$1::VARCHAR WHERE users.id = $2::INTEGER
2026-01-31 14:26:30,408 INFO sqlalchemy.engine.Engine [generated in 0.00009s] ('simulation/simple-web-app-simulation', 8)
INFO:sqlalchemy.engine.Engine:[generated in 0.00009s] ('simulation/simple-web-app-simulation', 8)
2026-01-31 14:26:30,410 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
2026-01-31 14:26:30,410 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2026-01-31 14:26:30,410 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:httpx:HTTP Request: PUT https://api.github.com/repos/simulation/simple-web-app-simulation/contents/index.html "HTTP/1.1 404 Not Found"
INFO:httpx:HTTP Request: PUT https://api.github.com/repos/simulation/simple-web-app-simulation/contents/styles.css "HTTP/1.1 404 Not Found"
INFO:httpx:HTTP Request: PUT https://api.github.com/repos/simulation/simple-web-app-simulation/contents/app.js "HTTP/1.1 404 Not Found"
INFO:httpx:HTTP Request: PUT https://api.github.com/repos/simulation/simple-web-app-simulation/contents/README.md "HTTP/1.1 404 Not Found"
INFO:httpx:HTTP Request: PUT https://api.github.com/repos/simulation/simple-web-app-simulation/contents/.github/workflows/ci.yml "HTTP/1.1 404 Not Found"
DEBUG: Push result for index.html: 404
DEBUG: Push failed details: {"message":"Not Found","documentation_url":"https://docs.github.com/rest/repos/contents#create-or-update-file-contents","status":"404"}
DEBUG: Push result for styles.css: 404
DEBUG: Push failed details: {"message":"Not Found","documentation_url":"https://docs.github.com/rest/repos/contents#create-or-update-file-contents","status":"404"}
DEBUG: Push result for app.js: 404
DEBUG: Push failed details: {"message":"Not Found","documentation_url":"https://docs.github.com/rest/repos/contents#create-or-update-file-contents","status":"404"}
DEBUG: Push result for README.md: 404
DEBUG: Push failed details: {"message":"Not Found","documentation_url":"https://docs.github.com/rest/repos/contents#create-or-update-file-contents","status":"404"}
DEBUG: Push result for .github/workflows/ci.yml: 404
DEBUG: Push failed details: {"message":"Not Found","documentation_url":"https://docs.github.com/rest/repos/contents#create-or-update-file-contents","status":"404"}
2026-01-31 14:26:31,569 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2026-01-31 14:26:31,570 INFO sqlalchemy.engine.Engine INSERT INTO tickets (title, description, type, priority, story_points, status, assignee_id, due_date, completed_at) SELECT p0::VARCHAR, p1::VARCHAR, p2::VARCHAR, p3::ticketpriority, p4::INTEGER, p5::ticketstatus, p6::INTEGER, p7::TIMESTAMP WITH TIME  ... 612 characters truncated ...  p8, sen_counter) ORDER BY sen_counter RETURNING tickets.id, tickets.created_at, tickets.id AS id__1
INFO:sqlalchemy.engine.Engine:INSERT INTO tickets (title, description, type, priority, story_points, status, assignee_id, due_date, completed_at) SELECT p0::VARCHAR, p1::VARCHAR, p2::VARCHAR, p3::ticketpriority, p4::INTEGER, p5::ticketstatus, p6::INTEGER, p7::TIMESTAMP WITH TIME  ... 612 characters truncated ...  p8, sen_counter) ORDER BY sen_counter RETURNING tickets.id, tickets.created_at, tickets.id AS id__1
2026-01-31 14:26:31,570 INFO sqlalchemy.engine.Engine [generated in 0.00006s (insertmanyvalues) 1/1 (ordered)] ('Implement core features', 'Build the main functionality for: A task management system', 'story', 'HIGH', 5, 'TODO', 8, datetime.datetime(2026, 2, 1, 14, 26, 31, 568944), None, 'Add styling', 'Make the app look good with CSS', 'task', 'MEDIUM', 3, 'TODO', 8, datetime.datetime(2026, 2, 2, 14, 26, 31, 568944), None, 'Add error handling', 'Handle edge cases and errors', 'task', 'MEDIUM', 2, 'BACKLOG', 8, datetime.datetime(2026, 2, 3, 14, 26, 31, 568944), None)
INFO:sqlalchemy.engine.Engine:[generated in 0.00006s (insertmanyvalues) 1/1 (ordered)] ('Implement core features', 'Build the main functionality for: A task management system', 'story', 'HIGH', 5, 'TODO', 8, datetime.datetime(2026, 2, 1, 14, 26, 31, 568944), None, 'Add styling', 'Make the app look good with CSS', 'task', 'MEDIUM', 3, 'TODO', 8, datetime.datetime(2026, 2, 2, 14, 26, 31, 568944), None, 'Add error handling', 'Handle edge cases and errors', 'task', 'MEDIUM', 2, 'BACKLOG', 8, datetime.datetime(2026, 2, 3, 14, 26, 31, 568944), None)
2026-01-31 14:26:31,582 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:api.rag_utils:Loaded SimpleVectorDB with 13 collections
2026-01-31 14:26:31,621 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2026-01-31 14:26:31,621 INFO sqlalchemy.engine.Engine INSERT INTO activities (user_id, activity_type, description, extra_data) VALUES ($1::INTEGER, $2::activitytype, $3::VARCHAR, $4::VARCHAR) RETURNING activities.id, activities.created_at
INFO:sqlalchemy.engine.Engine:INSERT INTO activities (user_id, activity_type, description, extra_data) VALUES ($1::INTEGER, $2::activitytype, $3::VARCHAR, $4::VARCHAR) RETURNING activities.id, activities.created_at
2026-01-31 14:26:31,621 INFO sqlalchemy.engine.Engine [generated in 0.00007s] (8, 'REPO_CREATED', 'Created new GitHub repository: simple-web-app-simulation', '{"repo_name": "simple-web-app-simulation", "repo_url": "https://github.com/simulation/simple-web-app-simulation"}')
INFO:sqlalchemy.engine.Engine:[generated in 0.00007s] (8, 'REPO_CREATED', 'Created new GitHub repository: simple-web-app-simulation', '{"repo_name": "simple-web-app-simulation", "repo_url": "https://github.com/simulation/simple-web-app-simulation"}')
2026-01-31 14:26:31,628 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
2026-01-31 14:26:31,629 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2026-01-31 14:26:31,629 INFO sqlalchemy.engine.Engine SELECT activities.id, activities.user_id, activities.activity_type, activities.description, activities.extra_data, activities.created_at 
FROM activities 
WHERE activities.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:SELECT activities.id, activities.user_id, activities.activity_type, activities.description, activities.extra_data, activities.created_at 
FROM activities 
WHERE activities.id = $1::INTEGER
2026-01-31 14:26:31,629 INFO sqlalchemy.engine.Engine [generated in 0.00006s] (69,)
INFO:sqlalchemy.engine.Engine:[generated in 0.00006s] (69,)
2026-01-31 14:26:31,630 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:     127.0.0.1:59538 - "POST /api/onboarding/generate-repo?user_id=8 HTTP/1.1" 200 OK
2026-01-31 14:26:36,632 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2026-01-31 14:26:36,632 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.avatar_url, users.xp, users.level, users.sprint_start_date, users.onboarding_completed_tasks, users.repo_full_name, users.last_indexed_commit, users.truthfulness, users.effort, users.reliability, users.collaboration, users.quality 
FROM users 
WHERE users.username = $1::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT users.id, users.username, users.hashed_password, users.avatar_url, users.xp, users.level, users.sprint_start_date, users.onboarding_completed_tasks, users.repo_full_name, users.last_indexed_commit, users.truthfulness, users.effort, users.reliability, users.collaboration, users.quality 
FROM users 
WHERE users.username = $1::VARCHAR
2026-01-31 14:26:36,632 INFO sqlalchemy.engine.Engine [generated in 0.00007s] ('Sarah',)
INFO:sqlalchemy.engine.Engine:[generated in 0.00007s] ('Sarah',)
INFO:google_genai.models:AFC is enabled with max remote calls: 10.
INFO:httpx:HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
2026-01-31 14:26:37,578 INFO sqlalchemy.engine.Engine INSERT INTO messages (channel, content, sender_id, is_bot) VALUES ($1::VARCHAR, $2::VARCHAR, $3::INTEGER, $4::BOOLEAN) RETURNING messages.id, messages.timestamp
INFO:sqlalchemy.engine.Engine:INSERT INTO messages (channel, content, sender_id, is_bot) VALUES ($1::VARCHAR, $2::VARCHAR, $3::INTEGER, $4::BOOLEAN) RETURNING messages.id, messages.timestamp
2026-01-31 14:26:37,578 INFO sqlalchemy.engine.Engine [generated in 0.00009s] ('dev', 'Hey milenakow! ðŸ‘‹ Awesome job cloning your first repo, simple-web-app-simulation! ðŸŽ‰ Let me know if you get stuck on anything, happy to help! ðŸ˜Š\n', 3, True)
INFO:sqlalchemy.engine.Engine:[generated in 0.00009s] ('dev', 'Hey milenakow! ðŸ‘‹ Awesome job cloning your first repo, simple-web-app-simulation! ðŸŽ‰ Let me know if you get stuck on anything, happy to help! ðŸ˜Š\n', 3, True)
2026-01-31 14:26:37,579 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
2026-01-31 14:26:37,580 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2026-01-31 14:26:37,580 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.channel, messages.content, messages.sender_id, messages.is_bot, messages.timestamp 
FROM messages 
WHERE messages.id = $1::INTEGER
INFO:sqlalchemy.engine.Engine:SELECT messages.id, messages.channel, messages.content, messages.sender_id, messages.is_bot, messages.timestamp 
FROM messages 
WHERE messages.id = $1::INTEGER
2026-01-31 14:26:37,580 INFO sqlalchemy.engine.Engine [generated in 0.00005s] (177,)
INFO:sqlalchemy.engine.Engine:[generated in 0.00005s] (177,)
2026-01-31 14:26:37,581 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:api.rag_utils:Indexing repository 'simulation/simple-web-app-simulation' for user 8
INFO:httpx:HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/text-embedding-004:batchEmbedContents "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/text-embedding-004:batchEmbedContents "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/text-embedding-004:batchEmbedContents "HTTP/1.1 200 OK"
INFO:httpx:HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/text-embedding-004:batchEmbedContents "HTTP/1.1 200 OK"
INFO:api.rag_utils:SimpleVectorDB persisted to disk
INFO:api.rag_utils:Successfully indexed and persisted repository for user 8
